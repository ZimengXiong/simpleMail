# Copy to .env before running docker compose.
# This file is tuned for containerized deployment (client + api + worker + infra).
# Minimal values you must set for end-user deployment:
# - API_ADMIN_TOKEN
# - APP_BASE_URL
# - FRONTEND_BASE_URL
# - OIDC_ISSUER_URL
# - OIDC_CLIENT_ID
# - OIDC_ALLOWED_EMAILS (exactly one email)
# - VITE_OIDC_BASE_URL
# - VITE_OIDC_REALM
# - VITE_OIDC_CLIENT_ID
# POSTGRES_PASSWORD and DATABASE_URL are pre-wired for single-host Docker setup.
# Release image selection (set once, then only change SIMPLEMAIL_VERSION):
# - SIMPLEMAIL_BACKEND_REPOSITORY example: docker.io/zimengxiong/simplemail-backend
# - SIMPLEMAIL_CLIENT_REPOSITORY example: docker.io/zimengxiong/simplemail-client

POSTGRES_DB=simplemail
POSTGRES_USER=simplemail
POSTGRES_PASSWORD=change-me
DATABASE_URL=postgres://simplemail:change-me@postgres:5432/simplemail
SIMPLEMAIL_VERSION=latest
SIMPLEMAIL_BACKEND_REPOSITORY=docker.io/zimengxiong/simplemail-backend
SIMPLEMAIL_CLIENT_REPOSITORY=docker.io/zimengxiong/simplemail-client

PORT=3000
NODE_ENV=production
APP_BASE_URL=http://localhost:3000
FRONTEND_BASE_URL=http://localhost:5173
OAUTH_CALLBACK_PATH=/oauth/callback

API_ADMIN_TOKEN=change-me-api-admin-token
ALLOW_ADMIN_USER_BOOTSTRAP=false

# BYO OIDC defaults below.
# For bundled dev Keycloak profile, use:
#   OIDC_ISSUER_URL=http://localhost:8080/realms/simplemail
#   OIDC_JWKS_URI=http://keycloak:8080/realms/simplemail/protocol/openid-connect/certs
OIDC_ISSUER_URL=
OIDC_CLIENT_ID=simplemail-web
OIDC_JWKS_URI=
OIDC_ALLOWED_EMAILS=
OIDC_REQUIRED_SUBJECT=
OIDC_ALLOWED_ALGS=RS256
OIDC_REQUIRE_EMAIL_VERIFIED=false

GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=http://localhost:3000/api/oauth/google/callback

GMAIL_PUSH_ENABLED=false
GMAIL_PUSH_TOPIC_NAME=
GMAIL_PUSH_WEBHOOK_PATH=/api/gmail/push
GMAIL_PUSH_WEBHOOK_AUDIENCE=
GMAIL_PUSH_SERVICE_ACCOUNT_EMAIL=

SEAWEED_S3_ENDPOINT=http://seaweed-filer:8333
SEAWEED_REGION=us-east-1
SEAWEED_BUCKET=simplemail
SEAWEED_ACCESS_KEY_ID=simplemail-internal
SEAWEED_SECRET_ACCESS_KEY=simplemail-internal-secret
SEAWEED_FORCE_PATH_STYLE=true

# Frontend runtime OIDC settings injected into the client container at startup.
VITE_OIDC_BASE_URL=
VITE_OIDC_REALM=simplemail
VITE_OIDC_CLIENT_ID=simplemail-web
